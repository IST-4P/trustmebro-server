generator client {
    provider     = "prisma-client"
    // output       = "../../../../node_modules/@prisma-clients/role"
    output       = "../src/generated/prisma-client"
    moduleFormat = "cjs"
    // binaryTargets = ["native", "debian-openssl-1.1.x"]
}

datasource db {
    provider = "postgresql"
}

enum HTTP_METHOD {
    GET
    POST
    PUT
    DELETE
    PATCH
    OPTIONS
    HEAD
}

model Permission {
    id          String      @id @default(uuid())
    name        String      @db.VarChar(500)
    description String      @default("")
    path        String      @db.VarChar(1000)
    method      HTTP_METHOD
    module      String      @default("") @db.VarChar(500)
    roles       Role[]

    createdById Int?
    updatedById Int?
    deletedById Int?

    deletedAt DateTime?
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt

    @@index([deletedAt])
}

model Role {
    id          String       @id @default(uuid())
    name        String       @db.VarChar(500)
    description String       @default("")
    permissions Permission[]
    userIds     String[]

    createdById Int?
    updatedById Int?
    deletedById Int?

    deletedAt DateTime?
    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt

    @@index([deletedAt])
}
