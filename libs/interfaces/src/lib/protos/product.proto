syntax = "proto3";

package PRODUCT_SERVICE;

service ProductService {
  rpc CreateCategory(CreateCategoryRequest) returns (CategoryResponse);
  rpc UpdateCategory(UpdateCategoryRequest) returns (CategoryResponse);
  rpc DeleteCategory(DeleteCategoryRequest) returns (CategoryResponse);

  rpc CreateBrand(CreateBrandRequest) returns (BrandResponse);
  rpc UpdateBrand(UpdateBrandRequest) returns (BrandResponse);
  rpc DeleteBrand(DeleteBrandRequest) returns (BrandResponse);

  rpc CreateAttribute(CreateAttributeRequest) returns (AttributeResponse);
  rpc UpdateAttribute(UpdateAttributeRequest) returns (AttributeResponse);
  rpc DeleteAttribute(DeleteAttributeRequest) returns (AttributeResponse);

  rpc CreateProduct(CreateProductRequest) returns (ProductResponse);
  rpc UpdateProduct(UpdateProductRequest) returns (ProductResponse);
  rpc DeleteProduct(DeleteProductRequest) returns (ProductResponse);

  rpc GetSKU(GetSKURequest) returns (SKUResponse);

  rpc ValidateProducts(ValidateProductsRequest) returns (ValidateProductsResponse);
}

//====================================== Category ======================================//
message ParentCategoryResponse {
  string id = 1;
  string name = 2;
}

message CategoryResponse {
  string id = 1;
  string name = 2;
  string logo = 3;
  string parentCategoryId = 4;
  string createdById = 5;
  string updatedById = 6;
  string deletedById = 7;
  string deletedAt = 8;
  string createdAt = 9;
  string updatedAt = 10;
  optional ParentCategoryResponse parentCategory = 11;
}

//==================== CreateCategoryRequest ====================//
message CreateCategoryRequest {
  optional string processId = 1;
  string name = 2;
  string logo = 3;
  optional string parentCategoryId = 4;
  optional string createdById = 5;
}

//==================== UpdateCategoryRequest ====================//
message UpdateCategoryRequest {
  optional string processId = 1;
  string id = 2;
  optional string name = 3;
  optional string logo = 4;
  optional string parentCategoryId = 5;
  optional string updatedById = 6;
}

//==================== DeleteCategoryRequest ====================//
message DeleteCategoryRequest {
  optional string processId = 1;
  string id = 2;
  optional string deletedById = 3;
}

//========================================== Brand ==========================================//
message BrandResponse {
  string id = 1;
  string name = 2;
  string logo = 3;
  string createdById = 4;
  string updatedById = 5;
  string deletedById = 6;
  string deletedAt = 7;
  string createdAt = 8;
  string updatedAt = 9;
}

//==================== CreateBrandRequest ====================//
message CreateBrandRequest {
  optional string processId = 1;
  string name = 2;
  string logo = 3;
  optional string createdById = 4;
}

//==================== UpdateBrandRequest ====================//
message UpdateBrandRequest {
  optional string processId = 1;
  string id = 2;
  optional string name = 3;
  optional string logo = 4;
  optional string updatedById = 5;
}

//==================== DeleteBrandRequest ====================//
message DeleteBrandRequest {
  optional string processId = 1;
  string id = 2;
  optional string deletedById = 3;
}

//======================================== Attribute =========================================//
message AttributeCategory {
  bool isRequired = 1;
  Category category = 2;
}

message Category {
  string id = 1;
  string name = 2;
  string logo = 3;
  string parentCategoryId = 4;
}

message AttributeResponse {
  string id = 1;
  string name = 2;
  string url = 3;
  string createdById = 4;
  string updatedById = 5;
  string deletedById = 6;
  string deletedAt = 7;
  string createdAt = 8;
  string updatedAt = 9;
}

//==================== CreateAttributeRequest ====================//
message CreateAttributeRequest {
  optional string processId = 1;
  string name = 2;
  optional string createdById = 3;
  optional string url = 4;
}

//==================== UpdateAttributeRequest ====================//
message UpdateAttributeRequest {
  optional string processId = 1;
  string id = 2;
  string name = 3;
  optional string updatedById = 4;
  optional string url = 5;
}

//==================== DeleteAttributeRequest ====================//
message DeleteAttributeRequest {
  optional string processId = 1;
  string id = 2;
  optional string deletedById = 3;
}


//======================================== Product =========================================//
message Variant {
  string value = 1;
  repeated string options = 2;
}

message AttributeProduct {
  string name = 1;
  string value = 2;
}

message SKU {
  string id = 1;
  string value = 2;
  double price = 3;
  int32 stock = 4;
  string image = 5;
}

message SKUInput {
  string value = 1;
  double price = 2;
  int32 stock = 3;
  optional string image = 4;
}

//==================== CreateProductRequest ====================//
message CreateProductRequest {
  optional string processId = 1;
  string name = 2;
  double basePrice = 3;
  double virtualPrice = 4;
  optional string brandId = 5;
  repeated string images = 6;
  repeated Variant variants = 7;
  optional string createdById = 8;
  optional string updatedById = 9;
  string shopId = 10;
  string description = 11;
  optional string sizeGuide = 12;
  int32 provinceId = 13;
  int32 districtId = 14;
  int32 wardId = 15;
  string status = 16;
  repeated string categories = 17;
  repeated SKUInput skus = 18;
  repeated AttributeProduct attributes = 19;
}

//==================== UpdateProductRequest ====================//
message UpdateProductRequest {
  optional string processId = 1;
  string name = 2;
  double basePrice = 3;
  double virtualPrice = 4;
  optional string brandId = 5;
  repeated string images = 6;
  repeated Variant variants = 7;
  optional string createdById = 8;
  optional string updatedById = 9;
  string shopId = 10;
  string description = 11;
  optional string sizeGuide = 12;
  optional int32 provinceId = 13;
  optional int32 districtId = 14;
  optional int32 wardId = 15;
  string status = 16;
  repeated string categories = 17;
  repeated SKUInput skus = 18;
  repeated AttributeProduct attributes = 19;
  string id = 20;
}

//==================== DeleteProductRequest ====================//
message DeleteProductRequest {
  optional string processId = 1;
  string id = 2;
  optional string deletedById = 3;
  string shopId = 4;
}

//==================== ProductResponse ====================//
message ProductResponse {
  string id = 1;
  string name = 2;
  string description = 3;

  int32 provinceId = 4;
  int32 districtId = 5;
  int32 wardId = 6;

  optional string sizeGuide = 7;
  double basePrice = 8;
  double virtualPrice = 9;
  string status = 10;
  string brandId = 11;
  repeated string images = 12;
  repeated Variant variants = 13;
  repeated string reviewIds = 14;
  string shopId = 15;
  int32 likeCount = 16;
  int32 ratingCount = 17;
  int32 ratingSum = 18;
  double averageRate = 19;
  repeated AttributeProduct attributes = 20;
  int32 soldCount = 21;
  int32 viewCount = 22;
  bool isApproved = 23;
  bool isHidden = 24;
  int32 totalStock = 25;
  repeated SKU skus = 26;
  BrandInfo brand = 27;
  repeated CategoryInfo categories = 28;
  string createdById = 29;
  string updatedById = 30;
  string deletedById = 31;
  string deletedAt = 32;
  string createdAt = 33;
  string updatedAt = 34;
}

message BrandInfo {
  string id = 1;
  string name = 2;
  string logo = 3;
}

message CategoryInfo {
  string id = 1;
  string name = 2;
  string logo = 3;
  string parentCategoryId = 4;
}

//====================================================== SKU ======================================//
//==================== GetSKURequest ====================//
message GetSKURequest {
  optional string processId = 1;
  string id = 2;
}

//==================== SKUResponse ====================//
message SKUResponse {
  string id = 1;
  string value = 2;
  int32 price = 3;
  int32 stock = 4;
  string productId = 5;
  string image = 6;
  ProductResponse product = 7;
  string createdById = 8;
  string updatedById = 9;
  string deletedById = 10;
  string deletedAt = 11;
  string createdAt = 12;
  string updatedAt = 13;
}


//==================== ValidateProductsRequest ====================//
message ValidateItems {
  string productId = 1;
  string skuId = 2;
  int32 quantity = 3;
  string cartItemId = 4;
}

message ValidateProductsRequest {
  optional string processId = 1;
  repeated ValidateItems productIds = 2;
}

//==================== ValidateProductsResponse ====================//
message ValidateItemsResponse {
  string productId = 1;
  string skuId = 2;
  string cartItemId = 3;
  int32 quantity = 4;
  bool isValid = 5;
  int32 price = 6;
  string productName = 7;
  string productImage = 8;
  string skuValue = 9;
  string shopId = 10;
  string error = 11;
}


message ValidateProductsResponse {
  bool isValid = 1;
  repeated ValidateItemsResponse items = 2;
}